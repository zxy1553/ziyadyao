# 问题：角色取出武器时，会有配置的蒙太奇外的晃动。

# 排查记录
## 检查蒙太奇上下半身混合是否运行正常
在 takeout 过程中，混合开关如预期运行；排除问题来自于上下半身混合开关逻辑的可能；  
排除上下半身混合开关逻辑后，推测问题来源于混合的状态采样了TPose；  
随后决定将Blend采样时间置零，观察结果为仍有晃动，但较之前幅度变小；（过程中发现 资产的混合时间会被固定改回 0.2，发现是 PlayMontageTask 修改了CDO，修改了默认配置）；  
问题仍然存在，通过录频慢放，观察到角色会先替换自身Idle动画，再播放takeout动画。怀疑问题来自于takeout动画与Idle动画存在时序问题。  
最后通过将OnEquipped 逻辑用 Timer 包裹；武器takout动画播放正常，确定问题在时序上;  
打印帧号后，确认播放蒙太奇与装备逻辑在同一帧触发；
但同一帧也有先后顺序，OnEquipped 在当前帧的开始执行（是输入触发），蒙太奇的触发在 DuringPhysics（位于当前帧播放动画逻辑之后，因此播放在下一帧执行）；导致了先切到 Idle 状态，再播放蒙太奇的时序问题。


目前通过在Timeline中调用ApplyGameplayCue 并通过Lua 复写whileActive内的逻辑：Cue内部通过角色以及ASC获取对应的EquipmentInstance；随后通过 EI 调用原有的OnEquipped 方法；实现角色装备