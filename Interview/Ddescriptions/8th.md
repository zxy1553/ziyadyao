# Slide 8: SubAgent 架构——工作流封装

---

## 📌 页面主题
> **从手动编排 → 自动编排：将 Skills 封装为专用智能体**

---

## 🤔 为什么要封装 SubAgent？

### 现状问题
| 场景 | 用户需要做 | 痛点 |
|------|-----------|------|
| Dev | 先调 GAS-AbleTask，再用 Status Writer... | 需要记住调用顺序 |
| Debug | 先 ds_log_dump，再 log_split，再按总纲分析... | 容易遗漏步骤 |

### 解决思路
> **用户只需描述需求，SubAgent 自动编排 Skills**

---

## 🏗️ 架构图（核心视觉）

```
用户需求
"帮我开发一个 XXX Task"  /  "帮我排查 Bug #153027645"
                    │
                    ▼
        ┌─────────────────────┐
        │   Main Agent (路由)  │
        │   识别任务类型 → 分发  │
        └──────────┬──────────┘
                   │
       ┌───────────┴───────────┐
       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐
│  🔧 战斗开发     │    │  🐛 战斗Debug   │
│    Agent        │    │    Agent        │
├─────────────────┤    ├─────────────────┤
│ 内置工作流：      │    │ 内置工作流：      │
│ 1.识别开发类型   │    │ 1.获取BattleID   │
│ 2.检索知识库     │    │ 2.ds_log_dump   │
│ 3.调用Skill     │    │ 3.log_split     │
│ 4.生成代码+SOP  │    │ 4.按总纲分析     │
├─────────────────┤    │ 5.输出分析文档   │
│ 调用的Skills:    │    ├─────────────────┤
│ • GAS-AbleTask  │    │ 调用的Skills:    │
│ • Status Writer │    │ • DS Log Dump   │
│ • Condition     │    │ • Log Split     │
└─────────────────┘    └─────────────────┘
       │                       │
       └───────────┬───────────┘
                   ▼
        ┌─────────────────────┐
        │   📚 Knowledge Base  │
        │  API规范/Debug总纲   │
        │  最佳实践/日志模式    │
        └─────────────────────┘
```

---

## 🔄 调用流程对比

### Before：用户手动编排
```
用户 → 选择 Skill 1 → 执行 → 选择 Skill 2 → 执行 → ...
❌ 需要了解有哪些 Skill、按什么顺序调用
```

### After：SubAgent 自动编排
```
用户 → 描述需求 → SubAgent → 自动调用 Skill 1/2/3
✅ 用户零门槛，SubAgent 负责编排
```

---

## 📋 两个 SubAgent 职责对比

| 维度 | 战斗开发 Agent | 战斗 Debug Agent |
|------|---------------|------------------|
| **触发场景** | Task/Condition/Status/Filter 开发 | Bug 排查、崩溃分析、性能问题 |
| **内置工作流** | 识别类型 → 检索规范 → 生成代码 → 输出SOP | 拉取日志 → 切分过滤 → 按总纲分析 → 输出报告 |
| **调用 Skills** | GAS-AbleTask, Condition Writer, Status Writer | DS Log Dump, Log Split |

---

## 💡 核心价值

| 维度 | 说明 |
|------|------|
| **工作流封装** | 把「该怎么做」固化到 SubAgent 内部 |
| **知识库集成** | 每个 SubAgent 都能访问对应领域知识 |
| **Skill 编排** | 自动按正确顺序调用 Skills |
| **降低门槛** | 用户无需了解内部实现细节 |

---

## 🗣️ 演讲要点（30秒）

1. **问题引入**："有了 Skills 和知识库，但用户还需要记住怎么组合调用"
2. **解决方案**："封装两个 SubAgent，用户只需描述需求，自动编排工作流"
3. **架构说明**："Main Agent 做路由，SubAgent 内置工作流 + 访问知识库"
4. **价值总结**："从手动编排到自动编排，进一步降低使用门槛"

---

## 🎨 视觉建议

- **布局**：以架构图为核心，占据页面 60%
- **颜色**：Dev Agent 蓝色系，Debug Agent 橙色系，Knowledge 绿色系
- **重点**：用箭头强调「路由 → SubAgent → Skills → Knowledge」的调用链

---
